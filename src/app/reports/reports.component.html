<div class="row mb-2">
  <h3>
    Reportes
  </h3>
</div>

<div class="card">
  <div class="card-body">
    <form class="form-inline">
      <div class="form-group hidden">
        <div class="input-group">
          <input name="datepicker"
                 class="form-control"
                 ngbDatepicker
                 #datepicker="ngbDatepicker"
                 [autoClose]="'outside'"
                 (dateSelect)="onDateSelection($event)"
                 [displayMonths]="2"
                 [dayTemplate]="t"
                 outsideDays="hidden"
                 [startDate]="fromDate!"
                 tabindex="-1">
          <ng-template #t let-date let-focused="focused">
            <span class="custom-day"
                  [class.focused]="focused"
                  [class.range]="isRange(date)"
                  [class.faded]="isHovered(date) || isInside(date)"
                  (mouseenter)="hoveredDate = date"
                  (mouseleave)="hoveredDate = null">
              {{ date.day }}
            </span>
          </ng-template>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <input #dpFromDate
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpFromDate"
                 [value]="formatter.format(fromDate)"
                 (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
          <div class="input-group-append">
            <button class="btn btn-primary" (click)="datepicker.toggle()" type="button">
              <span class="fa fa-calendar-alt"></span>
            </button>
          </div>
        </div>
      </div>
      <div class="form-group ml-2">
        <div class="input-group">
          <input #dpToDate
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpToDate"
                 [value]="formatter.format(toDate)"
                 (input)="toDate = validateInput(toDate, dpToDate.value)">
          <div class="input-group-append">
            <button class="btn btn-primary" (click)="datepicker.toggle()" type="button">
              <span class="fa fa-calendar-alt"></span>
            </button>
          </div>
        </div>
      </div>
      <div class="col-md-3"></div>
    <div class="btn-group col" role="group">
      <button class="btn btn-xs btn-primary" (click)="getReport()">
        <span class="fa fa-play"></span> Generar reporte
      </button>    
    </div>
  </form>
</div>
</div>

<br>

<div class="row" *ngIf="!noData">
  <div class="card col-md-6">
    <div class="card-body text-center">
      <h5>Total de potenciales clientes</h5>
      <h1>{{ results.potenciales[0].value + ' de ' + (results.potenciales[0].value + results.potenciales[1].value) }}</h1>
      <h5>encuestas realizadas</h5>
    </div>
  </div>
  <div class="card col-md-6">
    <div class="card-body">
      <ngx-charts-bar-horizontal
      (window:resize)="onResize($event)"
      [results]="results.potenciales"
      [view]="view"
      [scheme]="colorScheme"
      [xAxis]="true"
      [yAxis]="true"
      [showXAxisLabel]="true"
      [showYAxisLabel]="true"
      [xAxisLabel]="xAxisLabel"
      [yAxisLabel]="yAxisLabel"
    >
    </ngx-charts-bar-horizontal>
    </div>
  </div>
</div>

<br>

<div class="row" *ngIf="!noData">
  <div class="card col-md-6">
    <div class="card-body text-center">
      <h5>Total vehiculos de potenciales clientes</h5>
      <!-- <h1>{{ results.vehiculos[0].value + ' de ' + (results[0].value + results[1].value) }}</h1> -->
    </div>
  </div>
  <div class="card col-md-6">
    <div class="card-body">
      <ngx-charts-bar-horizontal-normalized
      (window:resize)="onResize($event)"
      [results]="results.vehiculos"
      [view]="view"
      [scheme]="colorScheme"
      [xAxis]="true"
      [yAxis]="true"
      [showXAxisLabel]="true"
      [showYAxisLabel]="true"
      [xAxisLabel]="xAxisLabelVehiculos"
      [yAxisLabel]="yAxisLabelVehiculos"
      >
    </ngx-charts-bar-horizontal-normalized>
    </div>
  </div>
</div>